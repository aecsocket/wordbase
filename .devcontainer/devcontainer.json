{
  "name": "wordbase",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "runArgs": [
    // required to create unprivileged namespaces in bwrap for WebKitGTK
    "--privileged"
  ],
  "mounts": [
    {
      "type": "volume",
      "source": "wordbase-profile",
      "target": "/home/dev"
    },
    {
      "type": "volume",
      "target": "/home/dev/.vscode-server"
    },
    {
      "type": "bind",
      "source": "/etc/machine-id",
      "target": "/etc/machine-id"
    },
    {
      "type": "bind",
      "source": "${env:XDG_RUNTIME_DIR}/bus",
      "target": "${localEnv:XDG_RUNTIME_DIR}/bus"
    }
  ],
  "containerEnv": {
    "DBUS_SESSION_BUS_ADDRESS": "unix:path=${localEnv:XDG_RUNTIME_DIR}/bus"
  },
  "postCreateCommand": [
    ".devcontainer/install-unidic.sh",
    ".devcontainer/setup-schema-db.sh"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        // generic
        "ms-azuretools.vscode-docker",
        "GitHub.vscode-pull-request-github",
        // Rust
        "rust-lang.rust-analyzer",
        "vadimcn.vscode-lldb",
        "tamasfe.even-better-toml",
        "fill-labs.dependi",
        // GTK
        "bodil.blueprint-gtk",
        // SQLite
        "qwtel.sqlite-viewer"
      ]
    }
  }
}
